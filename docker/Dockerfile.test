FROM python:3.11-slim

WORKDIR /app

# Установка зависимостей
RUN pip install --no-cache-dir \
    pytest>=7.4.0 \
    pytest-html>=4.0.0 \
    requests>=2.31.0 \
    pydantic>=2.0.0 \
    pyyaml>=6.0.0 \
    locust>=2.15.0

# Копирование исходного кода
COPY . .

# Установка PYTHONPATH
ENV PYTHONPATH=/app

# Команда по умолчанию - запуск тестов
CMD ["pytest", "tests/api/", "-v", "--tb=short"]
